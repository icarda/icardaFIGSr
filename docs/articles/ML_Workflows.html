<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Predictive Modeling using tuneTrain() • icardaFIGSr</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.4.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.4.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Predictive Modeling using tuneTrain()">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">icardaFIGSr</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.0.2</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/CropData.html">Accessing Crop-Related Data</a></li>
    <li><a class="dropdown-item" href="../articles/ML_Workflows.html">Predictive Modeling using tuneTrain()</a></li>
    <li><a class="dropdown-item" href="../articles/Sites_climate.html">Extracting Sites Climate Data</a></li>
    <li><a class="dropdown-item" href="../articles/vignette.html">icardaFIGSr tutorial</a></li>
  </ul>
</li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Predictive Modeling using tuneTrain()</h1>
                        <h4 data-toc-skip class="author">Chafik Analy,
Khadija Aouzal, Zakaria Kehel</h4>
            
            <h4 data-toc-skip class="date">2025-12-18</h4>
      

      <div class="d-none name"><code>ML_Workflows.Rmd</code></div>
    </div>

    
    
<div class="section level3">
<h3 id="binary-classification-balanced-data">Binary classification: balanced data<a class="anchor" aria-label="anchor" href="#binary-classification-balanced-data"></a>
</h3>
<p><code>septoriaDurumWC</code> dataset is used to illustrate the binary
classification of balanced data. This dataset includes monthly data for
3 climatic variables (tmin, tmax and precipitation), 19 bioclimatic
variables and evaluation of durum wheat accessions for Septoria
Tritici.</p>
<p>The response to Septoria Tritici is labeled as <code>R</code> for
<code>Resistant</code> and <code>S</code> for
<code>Susceptible</code>.</p>
<ul>
<li>
<strong>R (Resistant):</strong> represents samples/observations that
are resistant to Septoria. This level indicates the wheat genotypes or
environmental conditions where Septoria’s impact is minimal or
absent.</li>
<li>
<strong>S (Susceptible):</strong> represents samples/observations
that are susceptible to Septoria. This level indicates the wheat
genotypes or environmental conditions where Septoria’s impact is
significant. <!-- 

```r
library(icardaFIGSr)
library(dplyr)

data("septoriaDurumWC")

septoriaDurumWC|>
   count(ST_S)
#>  [38;5;246m# A tibble: 2 × 2 [39m
#>   ST_S      n
#>    [3m [38;5;246m<fct> [39m [23m  [3m [38;5;246m<int> [39m [23m
#>  [38;5;250m1 [39m R       106
#>  [38;5;250m2 [39m S        94
```
 -->
</li>
</ul>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va">icardaFIGSr</span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://xrobin.github.io/pROC/" class="external-link">pROC</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/topepo/caret/" class="external-link">caret</a></span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Load data sample</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="st">"septoriaDurumWC"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Check data is balanced</span></span>
<span><span class="va">septoriaDurumWC</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/count.html" class="external-link">count</a></span><span class="op">(</span><span class="va">ST_S</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 2 × 2</span></span></span>
<span><span class="co">#&gt;   ST_S      n</span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span> <span style="color: #949494; font-style: italic;">&lt;int&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> R       106</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span> S        94</span></span>
<span></span>
<span><span class="co">## Run binary classification of ST_S with balanced data</span></span>
<span><span class="va">knn.ST_S</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/tuneTrain.html">tuneTrain</a></span><span class="op">(</span>data <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/as.data.frame.html" class="external-link">as.data.frame</a></span><span class="op">(</span><span class="va">septoriaDurumWC</span><span class="op">)</span>,</span>
<span>                      y <span class="op">=</span>  <span class="st">'ST_S'</span>,</span>
<span>                      method <span class="op">=</span> <span class="st">'knn'</span>, <span class="co"># using knn algorithm</span></span>
<span>                      summary <span class="op">=</span> <span class="va">multiClassSummary</span>, <span class="co"># Important for classification tasks</span></span>
<span>                      repeats <span class="op">=</span> <span class="fl">3</span>,</span>
<span>                      classProbs <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span> <span class="co"># also important for classification tasks</span></span>
<span><span class="co">#&gt; k-Nearest Neighbors </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; 141 samples</span></span>
<span><span class="co">#&gt;  55 predictor</span></span>
<span><span class="co">#&gt;   2 classes: 'R', 'S' </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Pre-processing: centered (55), scaled (55) </span></span>
<span><span class="co">#&gt; Resampling: Cross-Validated (10 fold, repeated 3 times) </span></span>
<span><span class="co">#&gt; Summary of sample sizes: 127, 128, 128, 127, 126, 126, ... </span></span>
<span><span class="co">#&gt; Resampling results across tuning parameters:</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;   k   logLoss    AUC        prAUC      Accuracy   Kappa      F1       </span></span>
<span><span class="co">#&gt;    5  2.2616126  0.6500709  0.4828789  0.6260562  0.2572795  0.6009026</span></span>
<span><span class="co">#&gt;    7  1.4423420  0.6460530  0.5016384  0.6289377  0.2653482  0.5986522</span></span>
<span><span class="co">#&gt;    9  1.2328555  0.6360261  0.5097475  0.6247009  0.2577766  0.5951461</span></span>
<span><span class="co">#&gt;   11  1.0782278  0.6340632  0.5203342  0.6095726  0.2262241  0.5750704</span></span>
<span><span class="co">#&gt;   13  0.6905751  0.6438209  0.5202541  0.6143590  0.2375240  0.5794117</span></span>
<span><span class="co">#&gt;   15  0.6884231  0.6386621  0.5269275  0.6119536  0.2314113  0.5749646</span></span>
<span><span class="co">#&gt;   17  0.6793789  0.6402778  0.5203508  0.6068254  0.2211182  0.5725103</span></span>
<span><span class="co">#&gt;   19  0.6735896  0.6417304  0.5173074  0.6117460  0.2347800  0.5645023</span></span>
<span><span class="co">#&gt;   21  0.6639009  0.6502480  0.5136864  0.6093407  0.2294590  0.5623978</span></span>
<span><span class="co">#&gt;   23  0.6628867  0.6429422  0.5271042  0.6024908  0.2168394  0.5522164</span></span>
<span><span class="co">#&gt;   Sensitivity  Specificity  Pos_Pred_Value  Neg_Pred_Value  Precision</span></span>
<span><span class="co">#&gt;   0.5541667    0.7047619    0.6948545       0.5858345       0.6948545</span></span>
<span><span class="co">#&gt;   0.5398810    0.7277778    0.7046693       0.5854978       0.7046693</span></span>
<span><span class="co">#&gt;   0.5315476    0.7293651    0.6987698       0.5804389       0.6987698</span></span>
<span><span class="co">#&gt;   0.5172619    0.7119048    0.6892593       0.5665308       0.6892593</span></span>
<span><span class="co">#&gt;   0.5172619    0.7238095    0.6871825       0.5720010       0.6871825</span></span>
<span><span class="co">#&gt;   0.5119048    0.7214286    0.6844048       0.5691414       0.6844048</span></span>
<span><span class="co">#&gt;   0.5166667    0.7055556    0.6712302       0.5682552       0.6712302</span></span>
<span><span class="co">#&gt;   0.4898810    0.7476190    0.6959524       0.5685281       0.6959524</span></span>
<span><span class="co">#&gt;   0.4851190    0.7468254    0.7012698       0.5632900       0.7012698</span></span>
<span><span class="co">#&gt;   0.4720238    0.7476190    0.7046429       0.5555568       0.7046429</span></span>
<span><span class="co">#&gt;   Recall     Detection_Rate  Balanced_Accuracy</span></span>
<span><span class="co">#&gt;   0.5541667  0.2938706       0.6294643        </span></span>
<span><span class="co">#&gt;   0.5398810  0.2867033       0.6338294        </span></span>
<span><span class="co">#&gt;   0.5315476  0.2819414       0.6304563        </span></span>
<span><span class="co">#&gt;   0.5172619  0.2748230       0.6145833        </span></span>
<span><span class="co">#&gt;   0.5172619  0.2746398       0.6205357        </span></span>
<span><span class="co">#&gt;   0.5119048  0.2722589       0.6166667        </span></span>
<span><span class="co">#&gt;   0.5166667  0.2744811       0.6111111        </span></span>
<span><span class="co">#&gt;   0.4898810  0.2603053       0.6187500        </span></span>
<span><span class="co">#&gt;   0.4851190  0.2577411       0.6159722        </span></span>
<span><span class="co">#&gt;   0.4720238  0.2507326       0.6098214        </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Accuracy was used to select the optimal model using the largest value.</span></span>
<span><span class="co">#&gt; The final value used for the model was k = 7.</span></span>
<span><span class="co">#&gt; k-Nearest Neighbors </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; 141 samples</span></span>
<span><span class="co">#&gt;  55 predictor</span></span>
<span><span class="co">#&gt;   2 classes: 'R', 'S' </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Pre-processing: centered (55), scaled (55) </span></span>
<span><span class="co">#&gt; Resampling: Cross-Validated (10 fold, repeated 3 times) </span></span>
<span><span class="co">#&gt; Summary of sample sizes: 127, 127, 127, 128, 127, 126, ... </span></span>
<span><span class="co">#&gt; Resampling results across tuning parameters:</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;   k  logLoss   AUC        prAUC      Accuracy   Kappa      F1       </span></span>
<span><span class="co">#&gt;   5  2.117061  0.6671840  0.4985782  0.6319414  0.2684773  0.6033431</span></span>
<span><span class="co">#&gt;   6  1.214363  0.6505385  0.4905817  0.6425031  0.2893426  0.6199563</span></span>
<span><span class="co">#&gt;   7  1.146843  0.6472222  0.4918258  0.6181319  0.2426935  0.5871552</span></span>
<span><span class="co">#&gt;   8  1.160049  0.6324192  0.4919960  0.6131868  0.2341963  0.5837480</span></span>
<span><span class="co">#&gt;   9  1.159630  0.6238308  0.4998371  0.6082418  0.2230264  0.5791040</span></span>
<span><span class="co">#&gt;   Sensitivity  Specificity  Pos_Pred_Value  Neg_Pred_Value  Precision</span></span>
<span><span class="co">#&gt;   0.5517857    0.7214286    0.7167328       0.5934367       0.7167328</span></span>
<span><span class="co">#&gt;   0.5690476    0.7253968    0.7253836       0.5990717       0.7253836</span></span>
<span><span class="co">#&gt;   0.5297619    0.7166667    0.7049206       0.5769481       0.7049206</span></span>
<span><span class="co">#&gt;   0.5351190    0.7031746    0.6975998       0.5739165       0.6975998</span></span>
<span><span class="co">#&gt;   0.5291667    0.6984127    0.6915873       0.5684466       0.6915873</span></span>
<span><span class="co">#&gt;   Recall     Detection_Rate  Balanced_Accuracy</span></span>
<span><span class="co">#&gt;   0.5517857  0.2940659       0.6366071        </span></span>
<span><span class="co">#&gt;   0.5690476  0.3030891       0.6472222        </span></span>
<span><span class="co">#&gt;   0.5297619  0.2820024       0.6232143        </span></span>
<span><span class="co">#&gt;   0.5351190  0.2843834       0.6191468        </span></span>
<span><span class="co">#&gt;   0.5291667  0.2819780       0.6137897        </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Accuracy was used to select the optimal model using the largest value.</span></span>
<span><span class="co">#&gt; The final value used for the model was k = 6.</span></span></code></pre></div>
<p>Let’s explore the results..</p>
<!-- ```{r }
# Class probabilities table
knn.ST_S$`Class Probabilities`
``` -->
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Plot class probabilities</span></span>
<span><span class="va">knn.ST_S</span><span class="op">$</span><span class="va">`Class Probabilities Plot`</span></span></code></pre></div>
<div class="figure">
<img src="ML_Workflows_files/figure-html/unnamed-chunk-4-1.png" alt="Class Probabilities for ST_S using KNN" width="672"><p class="caption">
Class Probabilities for ST_S using KNN
</p>
</div>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># ROC plot</span></span>
<span><span class="va">knn.ST_S</span><span class="op">$</span><span class="va">ROC_Plot</span></span></code></pre></div>
<div class="figure">
<img src="ML_Workflows_files/figure-html/unnamed-chunk-5-1.png" alt="Roc Plot for ST_S using KNN" width="672"><p class="caption">
Roc Plot for ST_S using KNN
</p>
</div>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Variable importance</span></span>
<span><span class="va">knn.ST_S</span><span class="op">$</span><span class="va">VariableImportance</span></span></code></pre></div>
<div class="figure">
<img src="ML_Workflows_files/figure-html/unnamed-chunk-6-1.png" alt="Variable Importance for ST_S using KNN" width="672"><p class="caption">
Variable Importance for ST_S using KNN
</p>
</div>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Model quality</span></span>
<span><span class="va">knn.ST_S</span><span class="op">$</span><span class="va">`Model quality`</span></span>
<span><span class="co">#&gt; Confusion Matrix and Statistics</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;           Reference</span></span>
<span><span class="co">#&gt; Prediction  R  S</span></span>
<span><span class="co">#&gt;          R 20  8</span></span>
<span><span class="co">#&gt;          S 11 20</span></span>
<span><span class="co">#&gt;                                           </span></span>
<span><span class="co">#&gt;                Accuracy : 0.678           </span></span>
<span><span class="co">#&gt;                  95% CI : (0.5436, 0.7938)</span></span>
<span><span class="co">#&gt;     No Information Rate : 0.5254          </span></span>
<span><span class="co">#&gt;     P-Value [Acc &gt; NIR] : 0.01262         </span></span>
<span><span class="co">#&gt;                                           </span></span>
<span><span class="co">#&gt;                   Kappa : 0.3576          </span></span>
<span><span class="co">#&gt;                                           </span></span>
<span><span class="co">#&gt;  Mcnemar's Test P-Value : 0.64636         </span></span>
<span><span class="co">#&gt;                                           </span></span>
<span><span class="co">#&gt;             Sensitivity : 0.6452          </span></span>
<span><span class="co">#&gt;             Specificity : 0.7143          </span></span>
<span><span class="co">#&gt;          Pos Pred Value : 0.7143          </span></span>
<span><span class="co">#&gt;          Neg Pred Value : 0.6452          </span></span>
<span><span class="co">#&gt;              Prevalence : 0.5254          </span></span>
<span><span class="co">#&gt;          Detection Rate : 0.3390          </span></span>
<span><span class="co">#&gt;    Detection Prevalence : 0.4746          </span></span>
<span><span class="co">#&gt;       Balanced Accuracy : 0.6797          </span></span>
<span><span class="co">#&gt;                                           </span></span>
<span><span class="co">#&gt;        'Positive' Class : R               </span></span>
<span><span class="co">#&gt; </span></span>
<span></span>
<span><span class="co"># Training object</span></span>
<span><span class="va">knn.ST_S</span><span class="op">$</span><span class="va">Training</span></span>
<span><span class="co">#&gt; k-Nearest Neighbors </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; 141 samples</span></span>
<span><span class="co">#&gt;  55 predictor</span></span>
<span><span class="co">#&gt;   2 classes: 'R', 'S' </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Pre-processing: centered (55), scaled (55) </span></span>
<span><span class="co">#&gt; Resampling: Cross-Validated (10 fold, repeated 3 times) </span></span>
<span><span class="co">#&gt; Summary of sample sizes: 127, 127, 127, 128, 127, 126, ... </span></span>
<span><span class="co">#&gt; Resampling results across tuning parameters:</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;   k  logLoss   AUC        prAUC      Accuracy   Kappa      F1       </span></span>
<span><span class="co">#&gt;   5  2.117061  0.6671840  0.4985782  0.6319414  0.2684773  0.6033431</span></span>
<span><span class="co">#&gt;   6  1.214363  0.6505385  0.4905817  0.6425031  0.2893426  0.6199563</span></span>
<span><span class="co">#&gt;   7  1.146843  0.6472222  0.4918258  0.6181319  0.2426935  0.5871552</span></span>
<span><span class="co">#&gt;   8  1.160049  0.6324192  0.4919960  0.6131868  0.2341963  0.5837480</span></span>
<span><span class="co">#&gt;   9  1.159630  0.6238308  0.4998371  0.6082418  0.2230264  0.5791040</span></span>
<span><span class="co">#&gt;   Sensitivity  Specificity  Pos_Pred_Value  Neg_Pred_Value  Precision</span></span>
<span><span class="co">#&gt;   0.5517857    0.7214286    0.7167328       0.5934367       0.7167328</span></span>
<span><span class="co">#&gt;   0.5690476    0.7253968    0.7253836       0.5990717       0.7253836</span></span>
<span><span class="co">#&gt;   0.5297619    0.7166667    0.7049206       0.5769481       0.7049206</span></span>
<span><span class="co">#&gt;   0.5351190    0.7031746    0.6975998       0.5739165       0.6975998</span></span>
<span><span class="co">#&gt;   0.5291667    0.6984127    0.6915873       0.5684466       0.6915873</span></span>
<span><span class="co">#&gt;   Recall     Detection_Rate  Balanced_Accuracy</span></span>
<span><span class="co">#&gt;   0.5517857  0.2940659       0.6366071        </span></span>
<span><span class="co">#&gt;   0.5690476  0.3030891       0.6472222        </span></span>
<span><span class="co">#&gt;   0.5297619  0.2820024       0.6232143        </span></span>
<span><span class="co">#&gt;   0.5351190  0.2843834       0.6191468        </span></span>
<span><span class="co">#&gt;   0.5291667  0.2819780       0.6137897        </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Accuracy was used to select the optimal model using the largest value.</span></span>
<span><span class="co">#&gt; The final value used for the model was k = 6.</span></span>
<span></span>
<span><span class="co"># Tuning object</span></span>
<span><span class="va">knn.ST_S</span><span class="op">$</span><span class="va">Tuning</span></span>
<span><span class="co">#&gt; k-Nearest Neighbors </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; 141 samples</span></span>
<span><span class="co">#&gt;  55 predictor</span></span>
<span><span class="co">#&gt;   2 classes: 'R', 'S' </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Pre-processing: centered (55), scaled (55) </span></span>
<span><span class="co">#&gt; Resampling: Cross-Validated (10 fold, repeated 3 times) </span></span>
<span><span class="co">#&gt; Summary of sample sizes: 127, 128, 128, 127, 126, 126, ... </span></span>
<span><span class="co">#&gt; Resampling results across tuning parameters:</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;   k   logLoss    AUC        prAUC      Accuracy   Kappa      F1       </span></span>
<span><span class="co">#&gt;    5  2.2616126  0.6500709  0.4828789  0.6260562  0.2572795  0.6009026</span></span>
<span><span class="co">#&gt;    7  1.4423420  0.6460530  0.5016384  0.6289377  0.2653482  0.5986522</span></span>
<span><span class="co">#&gt;    9  1.2328555  0.6360261  0.5097475  0.6247009  0.2577766  0.5951461</span></span>
<span><span class="co">#&gt;   11  1.0782278  0.6340632  0.5203342  0.6095726  0.2262241  0.5750704</span></span>
<span><span class="co">#&gt;   13  0.6905751  0.6438209  0.5202541  0.6143590  0.2375240  0.5794117</span></span>
<span><span class="co">#&gt;   15  0.6884231  0.6386621  0.5269275  0.6119536  0.2314113  0.5749646</span></span>
<span><span class="co">#&gt;   17  0.6793789  0.6402778  0.5203508  0.6068254  0.2211182  0.5725103</span></span>
<span><span class="co">#&gt;   19  0.6735896  0.6417304  0.5173074  0.6117460  0.2347800  0.5645023</span></span>
<span><span class="co">#&gt;   21  0.6639009  0.6502480  0.5136864  0.6093407  0.2294590  0.5623978</span></span>
<span><span class="co">#&gt;   23  0.6628867  0.6429422  0.5271042  0.6024908  0.2168394  0.5522164</span></span>
<span><span class="co">#&gt;   Sensitivity  Specificity  Pos_Pred_Value  Neg_Pred_Value  Precision</span></span>
<span><span class="co">#&gt;   0.5541667    0.7047619    0.6948545       0.5858345       0.6948545</span></span>
<span><span class="co">#&gt;   0.5398810    0.7277778    0.7046693       0.5854978       0.7046693</span></span>
<span><span class="co">#&gt;   0.5315476    0.7293651    0.6987698       0.5804389       0.6987698</span></span>
<span><span class="co">#&gt;   0.5172619    0.7119048    0.6892593       0.5665308       0.6892593</span></span>
<span><span class="co">#&gt;   0.5172619    0.7238095    0.6871825       0.5720010       0.6871825</span></span>
<span><span class="co">#&gt;   0.5119048    0.7214286    0.6844048       0.5691414       0.6844048</span></span>
<span><span class="co">#&gt;   0.5166667    0.7055556    0.6712302       0.5682552       0.6712302</span></span>
<span><span class="co">#&gt;   0.4898810    0.7476190    0.6959524       0.5685281       0.6959524</span></span>
<span><span class="co">#&gt;   0.4851190    0.7468254    0.7012698       0.5632900       0.7012698</span></span>
<span><span class="co">#&gt;   0.4720238    0.7476190    0.7046429       0.5555568       0.7046429</span></span>
<span><span class="co">#&gt;   Recall     Detection_Rate  Balanced_Accuracy</span></span>
<span><span class="co">#&gt;   0.5541667  0.2938706       0.6294643        </span></span>
<span><span class="co">#&gt;   0.5398810  0.2867033       0.6338294        </span></span>
<span><span class="co">#&gt;   0.5315476  0.2819414       0.6304563        </span></span>
<span><span class="co">#&gt;   0.5172619  0.2748230       0.6145833        </span></span>
<span><span class="co">#&gt;   0.5172619  0.2746398       0.6205357        </span></span>
<span><span class="co">#&gt;   0.5119048  0.2722589       0.6166667        </span></span>
<span><span class="co">#&gt;   0.5166667  0.2744811       0.6111111        </span></span>
<span><span class="co">#&gt;   0.4898810  0.2603053       0.6187500        </span></span>
<span><span class="co">#&gt;   0.4851190  0.2577411       0.6159722        </span></span>
<span><span class="co">#&gt;   0.4720238  0.2507326       0.6098214        </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Accuracy was used to select the optimal model using the largest value.</span></span>
<span><span class="co">#&gt; The final value used for the model was k = 7.</span></span></code></pre></div>
<blockquote>
<p><em>Note the difference between Model Training and Tuning objects at
the end of the output. The final hyperparameter value is different (6 vs
7).</em></p>
</blockquote>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># You can also access the training and testing datasets from the resulted list</span></span>
<span><span class="va">knn.ST_S</span><span class="op">$</span><span class="va">`Training Data`</span></span>
<span><span class="va">knn.ST_S</span><span class="op">$</span><span class="va">`Test Data`</span> </span></code></pre></div>
</div>
<div class="section level3">
<h3 id="binary-classification-imbalanced-data">Binary classification: imbalanced data<a class="anchor" aria-label="anchor" href="#binary-classification-imbalanced-data"></a>
</h3>
<p><code>BarleyRNOWC</code> dataset is used to illustrate the binary
classification of imbalanced data, with the purpose of modeling the
response classification of barley Kernel row number type to climate
variables.</p>
<p>The response variable RNO categorizes barley into the following
levels:</p>
<ul>
<li>
<strong>1 (Six-rowed):</strong> represents barley genotypes with six
distinct rows of kernels on the spike.</li>
<li>
<strong>2 (Two-rowed):</strong> represents barley genotypes with two
distinct rows of kernels on the spike.</li>
<li>
<strong>3 (Two-rowed - rudimentary florets):</strong> represents
two-rowed barley with underdeveloped or rudimentary florets.</li>
<li>
<strong>4 (Irregular lateral florets):</strong> represents barley
genotypes with irregularly developed lateral florets on the spike.</li>
<li>
<strong>5 (Irregular: 2 and 6 rows):</strong> represents
heterogeneous genotypes showing spikes with both two-rowed and six-rowed
characteristics.</li>
<li>
<strong>10 (Heterogeneous):</strong> represents a genetically
diverse group with mixed spike structures.</li>
</ul>
<p>For this example, we use only the first 2 categories :
<code>six-rowed</code> (cl_1) and <code>two-rowed</code> (cl_2).</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Load sample data</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="va">BarleyRNOWC</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Count classes for data imbalance check</span></span>
<span><span class="va">BarleyRNOWC</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/count.html" class="external-link">count</a></span><span class="op">(</span><span class="va">RNO</span><span class="op">)</span></span>
<span><span class="co">#&gt;   RNO   n</span></span>
<span><span class="co">#&gt; 1   1 170</span></span>
<span><span class="co">#&gt; 2   2  30</span></span>
<span></span>
<span><span class="co">## Binary classification of RNO</span></span>
<span><span class="va">rf.RNO</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/tuneTrain.html">tuneTrain</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">BarleyRNOWC</span>,</span>
<span>                      y <span class="op">=</span> <span class="st">'RNO'</span>,</span>
<span>                      method <span class="op">=</span> <span class="st">'rf'</span>,</span>
<span>                      summary <span class="op">=</span> <span class="va">multiClassSummary</span>,</span>
<span>                      imbalanceMethod <span class="op">=</span> <span class="st">"up"</span>,</span>
<span>                      imbalanceThreshold <span class="op">=</span> <span class="fl">0.2</span>,</span>
<span>                      process <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"scale"</span>, <span class="st">"center"</span><span class="op">)</span>,</span>
<span>                      classProbs <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>                      repeats <span class="op">=</span> <span class="fl">3</span><span class="op">)</span></span>
<span><span class="co">#&gt; Random Forest </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; 140 samples</span></span>
<span><span class="co">#&gt;  55 predictor</span></span>
<span><span class="co">#&gt;   2 classes: 'Cl_1', 'Cl_2' </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Pre-processing: scaled (55), centered (55) </span></span>
<span><span class="co">#&gt; Resampling: Cross-Validated (10 fold, repeated 3 times) </span></span>
<span><span class="co">#&gt; Summary of sample sizes: 126, 126, 126, 126, 126, 126, ... </span></span>
<span><span class="co">#&gt; Addtional sampling using up-sampling prior to pre-processing</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Resampling results across tuning parameters:</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;   mtry  logLoss   AUC        prAUC      Accuracy   Kappa      F1       </span></span>
<span><span class="co">#&gt;    2    1.436070  0.7476852  0.4196864  0.7865690  0.3195494  0.8640164</span></span>
<span><span class="co">#&gt;    7    1.514558  0.7419613  0.4360995  0.7789255  0.2284394  0.8633581</span></span>
<span><span class="co">#&gt;   13    1.870873  0.7203914  0.4096570  0.7578144  0.1728108  0.8493871</span></span>
<span><span class="co">#&gt;   19    1.501019  0.7403830  0.4364434  0.7569475  0.2059739  0.8456626</span></span>
<span><span class="co">#&gt;   25    1.793648  0.7391414  0.4262912  0.7835043  0.2397354  0.8661214</span></span>
<span><span class="co">#&gt;   31    1.802653  0.7130051  0.4081247  0.7761783  0.2400216  0.8594466</span></span>
<span><span class="co">#&gt;   37    1.711508  0.7451599  0.4158203  0.7552503  0.1921877  0.8454244</span></span>
<span><span class="co">#&gt;   43    1.690353  0.7302189  0.4299397  0.7715995  0.2365599  0.8559213</span></span>
<span><span class="co">#&gt;   49    1.671412  0.7347222  0.4131576  0.7867521  0.2524940  0.8679252</span></span>
<span><span class="co">#&gt;   55    1.746767  0.7247896  0.4243801  0.7622589  0.1919837  0.8517818</span></span>
<span><span class="co">#&gt;   Sensitivity  Specificity  Pos_Pred_Value  Neg_Pred_Value  Precision</span></span>
<span><span class="co">#&gt;   0.8318182    0.5277778    0.9104511       0.4520525       0.9104511</span></span>
<span><span class="co">#&gt;   0.8401515    0.4388889    0.8968864       0.3402211       0.8968864</span></span>
<span><span class="co">#&gt;   0.8234848    0.3833333    0.8857779       0.3014778       0.8857779</span></span>
<span><span class="co">#&gt;   0.8116162    0.4500000    0.8972484       0.3188776       0.8972484</span></span>
<span><span class="co">#&gt;   0.8457071    0.4333333    0.8972749       0.3818878       0.8972749</span></span>
<span><span class="co">#&gt;   0.8313131    0.4555556    0.9020781       0.3687925       0.9020781</span></span>
<span><span class="co">#&gt;   0.8121212    0.4277778    0.8931469       0.3041667       0.8931469</span></span>
<span><span class="co">#&gt;   0.8229798    0.4722222    0.9050126       0.3539116       0.9050126</span></span>
<span><span class="co">#&gt;   0.8431818    0.4611111    0.9030042       0.3508730       0.9030042</span></span>
<span><span class="co">#&gt;   0.8204545    0.4277778    0.8957248       0.3015306       0.8957248</span></span>
<span><span class="co">#&gt;   Recall     Detection_Rate  Balanced_Accuracy</span></span>
<span><span class="co">#&gt;   0.8318182  0.7076068       0.6797980        </span></span>
<span><span class="co">#&gt;   0.8401515  0.7142491       0.6395202        </span></span>
<span><span class="co">#&gt;   0.8234848  0.7002808       0.6034091        </span></span>
<span><span class="co">#&gt;   0.8116162  0.6898901       0.6308081        </span></span>
<span><span class="co">#&gt;   0.8457071  0.7190110       0.6395202        </span></span>
<span><span class="co">#&gt;   0.8313131  0.7068987       0.6434343        </span></span>
<span><span class="co">#&gt;   0.8121212  0.6907570       0.6199495        </span></span>
<span><span class="co">#&gt;   0.8229798  0.6999389       0.6476010        </span></span>
<span><span class="co">#&gt;   0.8431818  0.7173138       0.6521465        </span></span>
<span><span class="co">#&gt;   0.8204545  0.6975824       0.6241162        </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Accuracy was used to select the optimal model using the largest value.</span></span>
<span><span class="co">#&gt; The final value used for the model was mtry = 49.</span></span>
<span><span class="co">#&gt; Random Forest </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; 140 samples</span></span>
<span><span class="co">#&gt;  55 predictor</span></span>
<span><span class="co">#&gt;   2 classes: 'Cl_1', 'Cl_2' </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Pre-processing: scaled (55), centered (55) </span></span>
<span><span class="co">#&gt; Resampling: Cross-Validated (10 fold, repeated 3 times) </span></span>
<span><span class="co">#&gt; Summary of sample sizes: 126, 125, 126, 126, 126, 126, ... </span></span>
<span><span class="co">#&gt; Addtional sampling using up-sampling prior to pre-processing</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Resampling results across tuning parameters:</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;   mtry  logLoss   AUC        prAUC      Accuracy   Kappa      F1       </span></span>
<span><span class="co">#&gt;   47    1.639892  0.7233375  0.4345348  0.7672894  0.2207960  0.8521266</span></span>
<span><span class="co">#&gt;   48    1.839672  0.7059764  0.4269922  0.7626862  0.2206060  0.8479758</span></span>
<span><span class="co">#&gt;   49    1.871368  0.7000842  0.4059849  0.7533455  0.2023018  0.8421738</span></span>
<span><span class="co">#&gt;   50    1.613479  0.7179082  0.4225698  0.7552259  0.2085086  0.8434495</span></span>
<span><span class="co">#&gt;   51    1.574021  0.7051136  0.4182123  0.7484005  0.2156166  0.8369782</span></span>
<span><span class="co">#&gt;   Sensitivity  Specificity  Pos_Pred_Value  Neg_Pred_Value  Precision</span></span>
<span><span class="co">#&gt;   0.8270202    0.4277778    0.8916624       0.3439153       0.8916624</span></span>
<span><span class="co">#&gt;   0.8184343    0.4444444    0.8910499       0.3232143       0.8910499</span></span>
<span><span class="co">#&gt;   0.8131313    0.4166667    0.8865795       0.3388889       0.8865795</span></span>
<span><span class="co">#&gt;   0.8128788    0.4333333    0.8900126       0.3142036       0.8900126</span></span>
<span><span class="co">#&gt;   0.7962121    0.4833333    0.8989118       0.3174320       0.8989118</span></span>
<span><span class="co">#&gt;   Recall     Detection_Rate  Balanced_Accuracy</span></span>
<span><span class="co">#&gt;   0.8270202  0.7032723       0.6273990        </span></span>
<span><span class="co">#&gt;   0.8184343  0.6961050       0.6314394        </span></span>
<span><span class="co">#&gt;   0.8131313  0.6913675       0.6148990        </span></span>
<span><span class="co">#&gt;   0.8128788  0.6908669       0.6231061        </span></span>
<span><span class="co">#&gt;   0.7962121  0.6768987       0.6397727        </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Accuracy was used to select the optimal model using the largest value.</span></span>
<span><span class="co">#&gt; The final value used for the model was mtry = 47.</span></span>
<span></span>
<span><span class="co"># same outputs of binary classification task</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">rf.RNO</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "Tuning"                   "Training"                </span></span>
<span><span class="co">#&gt; [3] "Model quality"            "VariableImportance"      </span></span>
<span><span class="co">#&gt; [5] "ROC_Plot"                 "Class Probabilities"     </span></span>
<span><span class="co">#&gt; [7] "Class Probabilities Plot" "Training Data"           </span></span>
<span><span class="co">#&gt; [9] "Test Data"</span></span></code></pre></div>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">## Plot class probabilities</span></span>
<span><span class="va">rf.RNO</span><span class="op">$</span><span class="va">`Class Probabilities Plot`</span></span></code></pre></div>
<div class="figure">
<img src="ML_Workflows_files/figure-html/unnamed-chunk-9-1.png" alt="Class Probabilities for RNO using Random Forest" width="672"><p class="caption">
Class Probabilities for RNO using Random Forest
</p>
</div>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">## ROC plot</span></span>
<span><span class="va">rf.RNO</span><span class="op">$</span><span class="va">ROC_Plot</span></span></code></pre></div>
<div class="figure">
<img src="ML_Workflows_files/figure-html/unnamed-chunk-10-1.png" alt="Roc Plot for RNO using Random Forest" width="672"><p class="caption">
Roc Plot for RNO using Random Forest
</p>
</div>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">## Variable importance</span></span>
<span><span class="va">rf.RNO</span><span class="op">$</span><span class="va">VariableImportance</span></span></code></pre></div>
<div class="figure">
<img src="ML_Workflows_files/figure-html/unnamed-chunk-11-1.png" alt="Variable Importance for RNO using Random Forest" width="672"><p class="caption">
Variable Importance for RNO using Random Forest
</p>
</div>
</div>
<div class="section level3">
<h3 id="regression">Regression<a class="anchor" aria-label="anchor" href="#regression"></a>
</h3>
<p><code>DurumWheatDHEWC</code> dataset is designed for modeling climate
impacts on the days to heading (DHE) of durum wheat. It contains
multiple columns representing climate variables, which are used as
predictors, and a numeric response variable, DHE, which indicates the
number of days required for durum wheat to reach the heading stage.</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Load sample data for regression task</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="st">"DurumWheatDHEWC"</span><span class="op">)</span></span>
<span></span>
<span><span class="co">## Regression of DHE (days to heading)</span></span>
<span><span class="va">svm.DHE</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/tuneTrain.html">tuneTrain</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">DurumWheatDHEWC</span>,</span>
<span>                      y <span class="op">=</span>  <span class="st">'DHE'</span>,</span>
<span>                      method <span class="op">=</span> <span class="st">'svmLinear2'</span>,</span>
<span>                      summary <span class="op">=</span> <span class="va">defaultSummary</span>,</span>
<span>                      classProbs <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>                      repeats <span class="op">=</span> <span class="fl">3</span><span class="op">)</span></span>
<span><span class="co">#&gt; Support Vector Machines with Linear Kernel </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; 137 samples</span></span>
<span><span class="co">#&gt;  55 predictor</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Pre-processing: centered (55), scaled (55) </span></span>
<span><span class="co">#&gt; Resampling: Cross-Validated (10 fold, repeated 3 times) </span></span>
<span><span class="co">#&gt; Summary of sample sizes: 124, 123, 123, 123, 124, 123, ... </span></span>
<span><span class="co">#&gt; Resampling results across tuning parameters:</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;   cost    RMSE      Rsquared   MAE     </span></span>
<span><span class="co">#&gt;     0.25  4.392096  0.3874978  3.424457</span></span>
<span><span class="co">#&gt;     0.50  4.422735  0.3944809  3.404364</span></span>
<span><span class="co">#&gt;     1.00  4.471461  0.3923094  3.438605</span></span>
<span><span class="co">#&gt;     2.00  4.482016  0.3909093  3.431474</span></span>
<span><span class="co">#&gt;     4.00  4.629627  0.3641357  3.506504</span></span>
<span><span class="co">#&gt;     8.00  4.758136  0.3525155  3.548093</span></span>
<span><span class="co">#&gt;    16.00  4.962108  0.3316333  3.682896</span></span>
<span><span class="co">#&gt;    32.00  5.135696  0.3130516  3.818127</span></span>
<span><span class="co">#&gt;    64.00  5.209299  0.3139861  3.880438</span></span>
<span><span class="co">#&gt;   128.00  5.265016  0.3096848  3.924131</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; RMSE was used to select the optimal model using the smallest value.</span></span>
<span><span class="co">#&gt; The final value used for the model was cost = 0.25.</span></span>
<span><span class="co">#&gt; Support Vector Machines with Linear Kernel </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; 137 samples</span></span>
<span><span class="co">#&gt;  55 predictor</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Pre-processing: centered (55), scaled (55) </span></span>
<span><span class="co">#&gt; Resampling: Cross-Validated (10 fold, repeated 3 times) </span></span>
<span><span class="co">#&gt; Summary of sample sizes: 123, 123, 124, 123, 123, 124, ... </span></span>
<span><span class="co">#&gt; Resampling results across tuning parameters:</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;   cost  RMSE      Rsquared   MAE     </span></span>
<span><span class="co">#&gt;   0.25  4.374473  0.3888565  3.404007</span></span>
<span><span class="co">#&gt;   0.50  4.346750  0.4006997  3.346334</span></span>
<span><span class="co">#&gt;   0.75  4.348030  0.4065156  3.333252</span></span>
<span><span class="co">#&gt;   1.00  4.343706  0.4094038  3.314261</span></span>
<span><span class="co">#&gt;   1.25  4.350663  0.4096769  3.308364</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; RMSE was used to select the optimal model using the smallest value.</span></span>
<span><span class="co">#&gt; The final value used for the model was cost = 1.</span></span>
<span></span>
<span><span class="co"># Regression outputs</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">svm.DHE</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "Tuning"                       "Training"                    </span></span>
<span><span class="co">#&gt; [3] "Predictions"                  "Residuals Vs. Predicted Plot"</span></span>
<span><span class="co">#&gt; [5] "Predicted vs Actual Plot"     "Quality_metrics"             </span></span>
<span><span class="co">#&gt; [7] "VariableImportance"           "Training Data"               </span></span>
<span><span class="co">#&gt; [9] "Test Data"</span></span></code></pre></div>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">svm.DHE</span><span class="op">$</span><span class="va">VariableImportance</span></span></code></pre></div>
<div class="figure">
<img src="ML_Workflows_files/figure-html/unnamed-chunk-13-1.png" alt="Variable Importance for DHE" width="672"><p class="caption">
Variable Importance for DHE
</p>
</div>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">svm.DHE</span><span class="op">$</span><span class="va">Quality_metrics</span></span>
<span><span class="co">#&gt;      RMSE  Rsquared       MAE </span></span>
<span><span class="co">#&gt; 4.3359347 0.3971378 3.4593691</span></span>
<span><span class="va">svm.DHE</span><span class="op">$</span><span class="va">`Predicted vs Actual Plot`</span></span></code></pre></div>
<div class="figure">
<img src="ML_Workflows_files/figure-html/unnamed-chunk-14-1.png" alt="Predicted vs Actual DHE" width="672"><p class="caption">
Predicted vs Actual DHE
</p>
</div>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">svm.DHE</span><span class="op">$</span><span class="va">`Residuals Vs. Predicted Plot`</span></span></code></pre></div>
<div class="figure">
<img src="ML_Workflows_files/figure-html/unnamed-chunk-15-1.png" alt="Residuals vs predicted DHE" width="672"><p class="caption">
Residuals vs predicted DHE
</p>
</div>
</div>
<div class="section level3">
<h3 id="multiclass-classification">Multiclass classification<a class="anchor" aria-label="anchor" href="#multiclass-classification"></a>
</h3>
<p>In this case, we use the same <code>DurumWheatDHEWC</code> dataset to
create days to heading classes variable (DHE_Class) to fit a multiclass
model. DHE_classes are descibed as follows:</p>
<ul>
<li>
<strong>1 (Early):</strong> Represents samples/observations with
early days to heading, indicating adaptability to shorter growing
seasons or favorable early-season conditions.</li>
<li>
<strong>2 (Intermediate):</strong> Represents samples/observations
with moderate days to heading, indicating typical or average responses
under given environmental conditions.</li>
<li>
<strong>3 (Late):</strong> Represents samples/observations with late
days to heading, suggesting adaptability to longer growing seasons or
late-season conditions.</li>
</ul>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Create DHE Classes from DurumWheatDHEWC dataset</span></span>
<span><span class="va">DurumWheatDHEWC</span><span class="op">$</span><span class="va">DHE_class</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/ifelse.html" class="external-link">ifelse</a></span><span class="op">(</span></span>
<span>  <span class="va">DurumWheatDHEWC</span><span class="op">$</span><span class="va">DHE</span> <span class="op">&lt;=</span> <span class="fl">172</span>, <span class="st">"1"</span>,</span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/ifelse.html" class="external-link">ifelse</a></span><span class="op">(</span><span class="va">DurumWheatDHEWC</span><span class="op">$</span><span class="va">DHE</span> <span class="op">&lt;=</span> <span class="fl">180</span>, <span class="st">"2"</span>, <span class="st">"3"</span><span class="op">)</span></span>
<span> <span class="op">)</span></span>
<span> </span>
<span><span class="co"># Convert to factor </span></span>
<span><span class="va">DurumWheatDHEWC</span><span class="op">$</span><span class="va">DHE_class</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html" class="external-link">factor</a></span><span class="op">(</span><span class="va">DurumWheatDHEWC</span><span class="op">$</span><span class="va">DHE_class</span><span class="op">)</span></span>
<span>   </span>
<span><span class="co"># Count classes for data imbalance check</span></span>
<span><span class="va">DurumWheatDHEWC</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>   <span class="fu"><a href="https://dplyr.tidyverse.org/reference/count.html" class="external-link">count</a></span><span class="op">(</span><span class="va">DHE_class</span><span class="op">)</span></span>
<span><span class="co">#&gt;   DHE_class  n</span></span>
<span><span class="co">#&gt; 1         1 96</span></span>
<span><span class="co">#&gt; 2         2 87</span></span>
<span><span class="co">#&gt; 3         3 10</span></span></code></pre></div>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">## Run Multiclass Classification</span></span>
<span><span class="va">rf.DHE_class</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/tuneTrain.html">tuneTrain</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">DurumWheatDHEWC</span>,</span>
<span>                              y <span class="op">=</span>  <span class="st">'DHE_class'</span>,</span>
<span>                              method <span class="op">=</span> <span class="st">'rf'</span>,</span>
<span>                              parallelComputing <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>                              summary <span class="op">=</span> <span class="va">multiClassSummary</span>,</span>
<span>                              imbalanceMethod <span class="op">=</span><span class="st">"up"</span>, <span class="co"># Here we upsample the less represented class (3)</span></span>
<span>                              imbalanceThreshold <span class="op">=</span> <span class="fl">0.2</span>,</span>
<span>                              classProbs <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>                              repeats <span class="op">=</span> <span class="fl">3</span><span class="op">)</span></span>
<span><span class="co">#&gt; Random Forest </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; 136 samples</span></span>
<span><span class="co">#&gt;  56 predictor</span></span>
<span><span class="co">#&gt;   3 classes: 'Cl_1', 'Cl_2', 'Cl_3' </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Pre-processing: centered (56), scaled (56) </span></span>
<span><span class="co">#&gt; Resampling: Cross-Validated (10 fold, repeated 3 times) </span></span>
<span><span class="co">#&gt; Summary of sample sizes: 124, 122, 122, 123, 123, 122, ... </span></span>
<span><span class="co">#&gt; Addtional sampling using up-sampling prior to pre-processing</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Resampling results across tuning parameters:</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;   mtry  logLoss       AUC        prAUC       Accuracy   Kappa      Mean_F1  </span></span>
<span><span class="co">#&gt;    2    0.5939983806  0.8747295  0.57783406  0.7183761  0.4776484  0.6151515</span></span>
<span><span class="co">#&gt;    8    0.3316253502  0.9771833  0.63240857  0.9121551  0.8351317  0.9521368</span></span>
<span><span class="co">#&gt;   14    0.2037479108  0.9997685  0.64667108  0.9508242  0.9074325  0.9871286</span></span>
<span><span class="co">#&gt;   20    0.1289448417  1.0000000  0.63822751  0.9805556  0.9641291  0.9909143</span></span>
<span><span class="co">#&gt;   26    0.0835792340  1.0000000  0.61626984  0.9976190  0.9957958  0.9975580</span></span>
<span><span class="co">#&gt;   32    0.0502943362  1.0000000  0.62063492  1.0000000  1.0000000  1.0000000</span></span>
<span><span class="co">#&gt;   38    0.0306568539  1.0000000  0.60740741  1.0000000  1.0000000  1.0000000</span></span>
<span><span class="co">#&gt;   44    0.0150253649  1.0000000  0.51441799  1.0000000  1.0000000  1.0000000</span></span>
<span><span class="co">#&gt;   50    0.0059382328  1.0000000  0.35661376  1.0000000  1.0000000  1.0000000</span></span>
<span><span class="co">#&gt;   56    0.0000245667  1.0000000  0.01111111  1.0000000  1.0000000  1.0000000</span></span>
<span><span class="co">#&gt;   Mean_Sensitivity  Mean_Specificity  Mean_Pos_Pred_Value  Mean_Neg_Pred_Value</span></span>
<span><span class="co">#&gt;   0.5215420         0.8302096         0.4950491            0.8493366          </span></span>
<span><span class="co">#&gt;   0.7127740         0.9468254         0.9476190            0.9539387          </span></span>
<span><span class="co">#&gt;   0.8435374         0.9700397         0.9890873            0.9783321          </span></span>
<span><span class="co">#&gt;   0.9297052         0.9884259         0.9922969            0.9899534          </span></span>
<span><span class="co">#&gt;   0.9977324         0.9986111         0.9977324            0.9980159          </span></span>
<span><span class="co">#&gt;   1.0000000         1.0000000         1.0000000            1.0000000          </span></span>
<span><span class="co">#&gt;   1.0000000         1.0000000         1.0000000            1.0000000          </span></span>
<span><span class="co">#&gt;   1.0000000         1.0000000         1.0000000            1.0000000          </span></span>
<span><span class="co">#&gt;   1.0000000         1.0000000         1.0000000            1.0000000          </span></span>
<span><span class="co">#&gt;   1.0000000         1.0000000         1.0000000            1.0000000          </span></span>
<span><span class="co">#&gt;   Mean_Precision  Mean_Recall  Mean_Detection_Rate  Mean_Balanced_Accuracy</span></span>
<span><span class="co">#&gt;   0.4809414       0.5215420    0.2394587            0.6750974             </span></span>
<span><span class="co">#&gt;   0.9476190       0.7127740    0.3040517            0.8257748             </span></span>
<span><span class="co">#&gt;   0.9890873       0.8435374    0.3169414            0.9066043             </span></span>
<span><span class="co">#&gt;   0.9922969       0.9297052    0.3268519            0.9579082             </span></span>
<span><span class="co">#&gt;   0.9977324       0.9977324    0.3325397            0.9978741             </span></span>
<span><span class="co">#&gt;   1.0000000       1.0000000    0.3333333            1.0000000             </span></span>
<span><span class="co">#&gt;   1.0000000       1.0000000    0.3333333            1.0000000             </span></span>
<span><span class="co">#&gt;   1.0000000       1.0000000    0.3333333            1.0000000             </span></span>
<span><span class="co">#&gt;   1.0000000       1.0000000    0.3333333            1.0000000             </span></span>
<span><span class="co">#&gt;   1.0000000       1.0000000    0.3333333            1.0000000             </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Accuracy was used to select the optimal model using the largest value.</span></span>
<span><span class="co">#&gt; The final value used for the model was mtry = 32.</span></span>
<span><span class="co">#&gt; Random Forest </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; 136 samples</span></span>
<span><span class="co">#&gt;  56 predictor</span></span>
<span><span class="co">#&gt;   3 classes: 'Cl_1', 'Cl_2', 'Cl_3' </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Pre-processing: centered (56), scaled (56) </span></span>
<span><span class="co">#&gt; Resampling: Cross-Validated (10 fold, repeated 3 times) </span></span>
<span><span class="co">#&gt; Summary of sample sizes: 123, 122, 122, 122, 123, 123, ... </span></span>
<span><span class="co">#&gt; Addtional sampling using up-sampling prior to pre-processing</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Resampling results across tuning parameters:</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;   mtry  logLoss     AUC  prAUC      Accuracy  Kappa  Mean_F1  Mean_Sensitivity</span></span>
<span><span class="co">#&gt;   30    0.06222947  1    0.6321429  1         1      1        1               </span></span>
<span><span class="co">#&gt;   31    0.05730437  1    0.6276455  1         1      1        1               </span></span>
<span><span class="co">#&gt;   32    0.05284178  1    0.6206349  1         1      1        1               </span></span>
<span><span class="co">#&gt;   33    0.04716016  1    0.6152116  1         1      1        1               </span></span>
<span><span class="co">#&gt;   34    0.04530740  1    0.6148148  1         1      1        1               </span></span>
<span><span class="co">#&gt;   Mean_Specificity  Mean_Pos_Pred_Value  Mean_Neg_Pred_Value  Mean_Precision</span></span>
<span><span class="co">#&gt;   1                 1                    1                    1             </span></span>
<span><span class="co">#&gt;   1                 1                    1                    1             </span></span>
<span><span class="co">#&gt;   1                 1                    1                    1             </span></span>
<span><span class="co">#&gt;   1                 1                    1                    1             </span></span>
<span><span class="co">#&gt;   1                 1                    1                    1             </span></span>
<span><span class="co">#&gt;   Mean_Recall  Mean_Detection_Rate  Mean_Balanced_Accuracy</span></span>
<span><span class="co">#&gt;   1            0.3333333            1                     </span></span>
<span><span class="co">#&gt;   1            0.3333333            1                     </span></span>
<span><span class="co">#&gt;   1            0.3333333            1                     </span></span>
<span><span class="co">#&gt;   1            0.3333333            1                     </span></span>
<span><span class="co">#&gt;   1            0.3333333            1                     </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Accuracy was used to select the optimal model using the largest value.</span></span>
<span><span class="co">#&gt; The final value used for the model was mtry = 30.</span></span>
<span><span class="co"># List returned objects</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">rf.DHE_class</span><span class="op">)</span></span>
<span><span class="co">#&gt;  [1] "Tuning"             "Training"           "Model quality"     </span></span>
<span><span class="co">#&gt;  [4] "VariableImportance" "ROC_Results"        "AUC_Values"        </span></span>
<span><span class="co">#&gt;  [7] "ROC_Plots"          "Probabilities_Plot" "Predictions"       </span></span>
<span><span class="co">#&gt; [10] "Training Data"      "Test Data"</span></span>
<span><span class="va">rf.DHE_class</span><span class="op">$</span><span class="va">`Model quality`</span></span>
<span><span class="co">#&gt; Confusion Matrix and Statistics</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;           Reference</span></span>
<span><span class="co">#&gt; Prediction Cl_1 Cl_2 Cl_3</span></span>
<span><span class="co">#&gt;       Cl_1   28    0    0</span></span>
<span><span class="co">#&gt;       Cl_2    0   26    1</span></span>
<span><span class="co">#&gt;       Cl_3    0    0    2</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Overall Statistics</span></span>
<span><span class="co">#&gt;                                           </span></span>
<span><span class="co">#&gt;                Accuracy : 0.9825          </span></span>
<span><span class="co">#&gt;                  95% CI : (0.9061, 0.9996)</span></span>
<span><span class="co">#&gt;     No Information Rate : 0.4912          </span></span>
<span><span class="co">#&gt;     P-Value [Acc &gt; NIR] : &lt; 2.2e-16       </span></span>
<span><span class="co">#&gt;                                           </span></span>
<span><span class="co">#&gt;                   Kappa : 0.9676          </span></span>
<span><span class="co">#&gt;                                           </span></span>
<span><span class="co">#&gt;  Mcnemar's Test P-Value : NA              </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Statistics by Class:</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;                      Class: Cl_1 Class: Cl_2 Class: Cl_3</span></span>
<span><span class="co">#&gt; Sensitivity               1.0000      1.0000     0.66667</span></span>
<span><span class="co">#&gt; Specificity               1.0000      0.9677     1.00000</span></span>
<span><span class="co">#&gt; Pos Pred Value            1.0000      0.9630     1.00000</span></span>
<span><span class="co">#&gt; Neg Pred Value            1.0000      1.0000     0.98182</span></span>
<span><span class="co">#&gt; Prevalence                0.4912      0.4561     0.05263</span></span>
<span><span class="co">#&gt; Detection Rate            0.4912      0.4561     0.03509</span></span>
<span><span class="co">#&gt; Detection Prevalence      0.4912      0.4737     0.03509</span></span>
<span><span class="co">#&gt; Balanced Accuracy         1.0000      0.9839     0.83333</span></span>
<span><span class="va">rf.DHE_class</span><span class="op">$</span><span class="va">`Probabilities_Plot`</span></span></code></pre></div>
<p><img src="ML_Workflows_files/figure-html/unnamed-chunk-17-1.png" width="672"></p>
</div>
<div class="section level2">
<h2 id="splitdata">splitData()<a class="anchor" aria-label="anchor" href="#splitdata"></a>
</h2>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="co"># Subset septoriaDurumWC where column names having 3, ex tmin3, prec13</span></span>
<span><span class="va">septoriaDurumWC_subset</span> <span class="op">&lt;-</span> <span class="fu">icardaFIGSr</span><span class="fu">::</span><span class="va"><a href="../reference/septoriaDurumWC.html">septoriaDurumWC</a></span><span class="op">|&gt;</span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="va">ST_S</span>,<span class="fu"><a href="https://tidyselect.r-lib.org/reference/starts_with.html" class="external-link">contains</a></span><span class="op">(</span><span class="st">"3"</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># split data</span></span>
<span><span class="va">septoriaDurumWC_subset_split</span> <span class="op">&lt;-</span> <span class="fu">icardaFIGSr</span><span class="fu">::</span><span class="fu"><a href="../reference/splitData.html">splitData</a></span><span class="op">(</span><span class="va">septoriaDurumWC</span>,</span>
<span>                        seed <span class="op">=</span> <span class="fl">123</span>, y<span class="op">=</span><span class="st">"ST_S"</span>, p<span class="op">=</span><span class="fl">0.7</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Check results</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">septoriaDurumWC_subset_split</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "trainset" "testset"</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="getmetrics">getMetrics()<a class="anchor" aria-label="anchor" href="#getmetrics"></a>
</h2>
<div class="sourceCode" id="cb18"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="co"># Call the ST_S knn model fitted in tunTrain function section</span></span>
<span></span>
<span><span class="va">data.test</span> <span class="op">&lt;-</span> <span class="va">knn.ST_S</span><span class="op">$</span><span class="va">`Test Data`</span></span>
<span></span>
<span><span class="va">pred.ST_S</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/predict.html" class="external-link">predict</a></span><span class="op">(</span><span class="va">knn.ST_S</span><span class="op">$</span><span class="va">Tuning</span>, newdata <span class="op">=</span> <span class="va">data.test</span><span class="op">[</span> , <span class="op">-</span><span class="fl">1</span><span class="op">]</span><span class="op">)</span></span>
<span></span>
<span><span class="va">metrics.knn.ST_S</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/getMetrics.html">getMetrics</a></span><span class="op">(</span>y <span class="op">=</span> <span class="va">data.test</span><span class="op">$</span><span class="va">ST_S</span>,</span>
<span>                                       yhat <span class="op">=</span> <span class="va">pred.ST_S</span>, classtype <span class="op">=</span> <span class="fl">2</span><span class="op">)</span></span>
<span></span>
<span><span class="va">metrics.knn.ST_S</span></span>
<span><span class="co">#&gt; $Metrics</span></span>
<span><span class="co">#&gt;                            Metrics</span></span>
<span><span class="co">#&gt; Accuracy                     0.695</span></span>
<span><span class="co">#&gt; 95% CI              (0.561, 0.808)</span></span>
<span><span class="co">#&gt; No Information Rate          0.525</span></span>
<span><span class="co">#&gt; P-Value [Acc &gt; NIR]    0.006076751</span></span>
<span><span class="co">#&gt; Kappa                         0.39</span></span>
<span><span class="co">#&gt; Sensitivity                  0.677</span></span>
<span><span class="co">#&gt; Specificity                  0.714</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $CM</span></span>
<span><span class="co">#&gt;    R  S</span></span>
<span><span class="co">#&gt; R 21  8</span></span>
<span><span class="co">#&gt; S 10 20</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="getmetricspca">getMetricsPCA()<a class="anchor" aria-label="anchor" href="#getmetricspca"></a>
</h2>
<p>Please run below code chunk to test <code><a href="../reference/getMetricsPCA.html">getMetricsPCA()</a></code> on
any model rutrned by <code><a href="../reference/tuneTrain.html">tuneTrain()</a></code>.</p>
<div class="sourceCode" id="cb19"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="co">## Run Binary classification of ST_S with balanced data using random forest</span></span>
<span><span class="va">rf.ST_S</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/tuneTrain.html">tuneTrain</a></span><span class="op">(</span></span>
<span>                      data <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/as.data.frame.html" class="external-link">as.data.frame</a></span><span class="op">(</span><span class="va">septoriaDurumWC</span><span class="op">)</span>,</span>
<span>                      y <span class="op">=</span>  <span class="st">'ST_S'</span>,</span>
<span>                      method <span class="op">=</span> <span class="st">'rf'</span>, <span class="co"># using rf algorithm</span></span>
<span>                      summary <span class="op">=</span> <span class="va">multiClassSummary</span>, <span class="co"># Important for classification tasks  </span></span>
<span>                      parallelComputing <span class="op">=</span> <span class="cn">T</span>,</span>
<span>                      repeats <span class="op">=</span> <span class="fl">3</span>,</span>
<span>                      process <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"center"</span>,<span class="st">"scale"</span><span class="op">)</span>,</span>
<span>                      classProbs <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span> <span class="co"># Important for classification tasks</span></span>
<span><span class="co">#&gt; Random Forest </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; 141 samples</span></span>
<span><span class="co">#&gt;  55 predictor</span></span>
<span><span class="co">#&gt;   2 classes: 'R', 'S' </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Pre-processing: centered (55), scaled (55) </span></span>
<span><span class="co">#&gt; Resampling: Cross-Validated (10 fold, repeated 3 times) </span></span>
<span><span class="co">#&gt; Summary of sample sizes: 127, 128, 128, 127, 126, 126, ... </span></span>
<span><span class="co">#&gt; Resampling results across tuning parameters:</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;   mtry  logLoss    AUC        prAUC      Accuracy   Kappa      F1       </span></span>
<span><span class="co">#&gt;    2    0.6412434  0.7158659  0.6148240  0.6476190  0.2930938  0.6404406</span></span>
<span><span class="co">#&gt;    7    0.6617294  0.7012684  0.6019866  0.6447375  0.2873131  0.6373479</span></span>
<span><span class="co">#&gt;   13    0.6639525  0.7006803  0.6040758  0.6453968  0.2886863  0.6405937</span></span>
<span><span class="co">#&gt;   19    0.6743218  0.7056264  0.6070292  0.6424908  0.2823068  0.6393278</span></span>
<span><span class="co">#&gt;   25    0.6788256  0.6908163  0.5961963  0.6380952  0.2726412  0.6402410</span></span>
<span><span class="co">#&gt;   31    0.6755614  0.7024235  0.6010913  0.6408181  0.2777908  0.6397664</span></span>
<span><span class="co">#&gt;   37    0.6820936  0.7067319  0.6068832  0.6379365  0.2719193  0.6367858</span></span>
<span><span class="co">#&gt;   43    0.6761347  0.7018778  0.6006108  0.6358730  0.2675543  0.6349970</span></span>
<span><span class="co">#&gt;   49    0.6776657  0.6980442  0.5995196  0.6357143  0.2674820  0.6345067</span></span>
<span><span class="co">#&gt;   55    0.6780806  0.7001134  0.6051131  0.6239438  0.2438346  0.6197583</span></span>
<span><span class="co">#&gt;   Sensitivity  Specificity  Pos_Pred_Value  Neg_Pred_Value  Precision</span></span>
<span><span class="co">#&gt;   0.6136905    0.6801587    0.7010354       0.6172354       0.7010354</span></span>
<span><span class="co">#&gt;   0.6089286    0.6793651    0.7017941       0.6108862       0.7017941</span></span>
<span><span class="co">#&gt;   0.6184524    0.6706349    0.6924820       0.6156013       0.6924820</span></span>
<span><span class="co">#&gt;   0.6178571    0.6650794    0.6880640       0.6130087       0.6880640</span></span>
<span><span class="co">#&gt;   0.6279762    0.6452381    0.6824291       0.6150325       0.6824291</span></span>
<span><span class="co">#&gt;   0.6226190    0.6555556    0.6857095       0.6138023       0.6857095</span></span>
<span><span class="co">#&gt;   0.6178571    0.6547619    0.6858418       0.6076515       0.6858418</span></span>
<span><span class="co">#&gt;   0.6178571    0.6500000    0.6805243       0.6070563       0.6805243</span></span>
<span><span class="co">#&gt;   0.6232143    0.6444444    0.6763576       0.6134259       0.6763576</span></span>
<span><span class="co">#&gt;   0.6005952    0.6436508    0.6724423       0.5963360       0.6724423</span></span>
<span><span class="co">#&gt;   Recall     Detection_Rate  Balanced_Accuracy</span></span>
<span><span class="co">#&gt;   0.6136905  0.3268864       0.6469246        </span></span>
<span><span class="co">#&gt;   0.6089286  0.3240049       0.6441468        </span></span>
<span><span class="co">#&gt;   0.6184524  0.3289255       0.6445437        </span></span>
<span><span class="co">#&gt;   0.6178571  0.3287424       0.6414683        </span></span>
<span><span class="co">#&gt;   0.6279762  0.3337118       0.6366071        </span></span>
<span><span class="co">#&gt;   0.6226190  0.3314896       0.6390873        </span></span>
<span><span class="co">#&gt;   0.6178571  0.3289499       0.6363095        </span></span>
<span><span class="co">#&gt;   0.6178571  0.3291087       0.6339286        </span></span>
<span><span class="co">#&gt;   0.6232143  0.3316728       0.6338294        </span></span>
<span><span class="co">#&gt;   0.6005952  0.3199023       0.6221230        </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Accuracy was used to select the optimal model using the largest value.</span></span>
<span><span class="co">#&gt; The final value used for the model was mtry = 2.</span></span>
<span><span class="co">#&gt; Random Forest </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; 141 samples</span></span>
<span><span class="co">#&gt;  55 predictor</span></span>
<span><span class="co">#&gt;   2 classes: 'R', 'S' </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Pre-processing: centered (55), scaled (55) </span></span>
<span><span class="co">#&gt; Resampling: Cross-Validated (10 fold, repeated 3 times) </span></span>
<span><span class="co">#&gt; Summary of sample sizes: 126, 127, 127, 127, 128, 127, ... </span></span>
<span><span class="co">#&gt; Resampling results across tuning parameters:</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;   mtry  logLoss    AUC        prAUC      Accuracy   Kappa      F1       </span></span>
<span><span class="co">#&gt;   1     0.6293363  0.7274376  0.6138804  0.6601587  0.3225280  0.6571339</span></span>
<span><span class="co">#&gt;   2     0.6423611  0.7105867  0.5970603  0.6535165  0.3103013  0.6477069</span></span>
<span><span class="co">#&gt;   3     0.6505847  0.7126630  0.6043934  0.6383394  0.2807041  0.6262665</span></span>
<span><span class="co">#&gt;   4     0.6485721  0.7140590  0.6069122  0.6507937  0.3057462  0.6440842</span></span>
<span><span class="co">#&gt;   Sensitivity  Specificity  Pos_Pred_Value  Neg_Pred_Value  Precision</span></span>
<span><span class="co">#&gt;   0.6464286    0.6777778    0.6981085       0.6516138       0.6981085</span></span>
<span><span class="co">#&gt;   0.6339286    0.6777778    0.6920899       0.6418651       0.6920899</span></span>
<span><span class="co">#&gt;   0.6095238    0.6730159    0.6716138       0.6218711       0.6716138</span></span>
<span><span class="co">#&gt;   0.6244048    0.6841270    0.6948677       0.6314153       0.6948677</span></span>
<span><span class="co">#&gt;   Recall     Detection_Rate  Balanced_Accuracy</span></span>
<span><span class="co">#&gt;   0.6464286  0.3435409       0.6621032        </span></span>
<span><span class="co">#&gt;   0.6339286  0.3365324       0.6558532        </span></span>
<span><span class="co">#&gt;   0.6095238  0.3237607       0.6412698        </span></span>
<span><span class="co">#&gt;   0.6244048  0.3314286       0.6542659        </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Accuracy was used to select the optimal model using the largest value.</span></span>
<span><span class="co">#&gt; The final value used for the model was mtry = 1.</span></span>
<span></span>
<span><span class="co"># get test data from one of the model to be used for prediction</span></span>
<span><span class="va">data.test</span> <span class="op">&lt;-</span> <span class="va">rf.ST_S</span><span class="op">$</span><span class="va">`Test Data`</span></span>
<span></span>
<span><span class="co"># Obtain predictions from previously run models : knn.ST_S and rf.ST_S</span></span>
<span><span class="va">pred.knn.ST_S</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/predict.html" class="external-link">predict</a></span><span class="op">(</span><span class="va">knn.ST_S</span><span class="op">$</span><span class="va">Tuning</span>, newdata <span class="op">=</span> <span class="va">data.test</span><span class="op">[</span> , <span class="op">-</span><span class="fl">1</span><span class="op">]</span><span class="op">)</span></span>
<span><span class="va">pred.rf.ST_S</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/predict.html" class="external-link">predict</a></span><span class="op">(</span><span class="va">rf.ST_S</span><span class="op">$</span><span class="va">Tuning</span>, newdata <span class="op">=</span> <span class="va">data.test</span><span class="op">[</span> , <span class="op">-</span><span class="fl">1</span><span class="op">]</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Get metrics for your model using computed metrics.knn.ST_S</span></span>
<span><span class="va">metrics.knn.ST_S</span> <span class="op">&lt;-</span> <span class="va">metrics.knn.ST_S</span></span>
<span><span class="va">metrics.rf.ST_S</span> <span class="op">&lt;-</span> <span class="fu">icardaFIGSr</span><span class="fu">::</span><span class="fu"><a href="../reference/getMetrics.html">getMetrics</a></span><span class="op">(</span>y <span class="op">=</span> <span class="va">data.test</span><span class="op">$</span><span class="va">ST_S</span>,</span>
<span>                         yhat <span class="op">=</span> <span class="va">pred.rf.ST_S</span>, classtype <span class="op">=</span> <span class="fl">2</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Indexing for 2-class models to remove extra column with</span></span>
<span><span class="co"># names of performance measures</span></span>
<span><span class="va">metrics.all</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/cbind.html" class="external-link">cbind</a></span><span class="op">(</span><span class="va">metrics.knn.ST_S</span>, <span class="va">metrics.rf.ST_S</span><span class="op">)</span></span>
<span>  </span>
<span><span class="co">## check data structure</span></span>
<span><span class="va">metrics.all</span></span>
<span><span class="co">#&gt;         metrics.knn.ST_S metrics.rf.ST_S</span></span>
<span><span class="co">#&gt; Metrics data.frame,1     data.frame,1   </span></span>
<span><span class="co">#&gt; CM      data.frame,2     data.frame,2</span></span></code></pre></div>
<div class="sourceCode" id="cb20"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">metrics.all</span><span class="op">[</span><span class="fl">1</span>,<span class="fl">1</span><span class="op">]</span></span>
<span><span class="co">#&gt; [[1]]</span></span>
<span><span class="co">#&gt;                            Metrics</span></span>
<span><span class="co">#&gt; Accuracy                     0.695</span></span>
<span><span class="co">#&gt; 95% CI              (0.561, 0.808)</span></span>
<span><span class="co">#&gt; No Information Rate          0.525</span></span>
<span><span class="co">#&gt; P-Value [Acc &gt; NIR]    0.006076751</span></span>
<span><span class="co">#&gt; Kappa                         0.39</span></span>
<span><span class="co">#&gt; Sensitivity                  0.677</span></span>
<span><span class="co">#&gt; Specificity                  0.714</span></span></code></pre></div>
<div class="sourceCode" id="cb21"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">metrics.all</span><span class="op">[</span><span class="fl">2</span>,<span class="fl">1</span><span class="op">]</span></span>
<span><span class="co">#&gt; [[1]]</span></span>
<span><span class="co">#&gt;    R  S</span></span>
<span><span class="co">#&gt; R 21  8</span></span>
<span><span class="co">#&gt; S 10 20</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="make_prediction">make_prediction()<a class="anchor" aria-label="anchor" href="#make_prediction"></a>
</h2>
<p><code><a href="../reference/make_prediction.html">make_prediction()</a></code> returns predictions or classes
probabilities and corresponding plots.</p>
<div class="sourceCode" id="cb22"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Make prediction for septoriaDurumWC using the previous tuning model knn.ST_S$Tuning</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="st">"septoriaDurumWC"</span><span class="op">)</span></span>
<span></span>
<span><span class="va">septoriaDurumWC</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/as.data.frame.html" class="external-link">as.data.frame</a></span><span class="op">(</span><span class="va">septoriaDurumWC</span><span class="op">)</span></span>
<span></span>
<span><span class="va">knn.pred</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/make_prediction.html">make_prediction</a></span><span class="op">(</span>newdata <span class="op">=</span> <span class="va">septoriaDurumWC</span>,</span>
<span>                                      y<span class="op">=</span><span class="st">'ST_S'</span>,</span>
<span>                                      model <span class="op">=</span> <span class="va">knn.ST_S</span><span class="op">$</span><span class="va">Tuning</span>,</span>
<span>                                      positive <span class="op">=</span> <span class="st">"R"</span>,</span>
<span>                                      auc <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">knn.pred</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "ClassProbabilities"     "ClassProbabilitiesPlot" "ROC_Curves"            </span></span>
<span><span class="co">#&gt; [4] "AUC"</span></span></code></pre></div>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Zakaria Kehel, Chafik Analy, Khadija Aouzal, Khadija Aziz, Bancy Ngatia.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.0.</p>
</div>

    </footer>
</div>





  </body>
</html>
