<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Splitting the Data, Tuning and Training the models, and making predictions — tuneTrain • icardaFIGSr</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Splitting the Data, Tuning and Training the models, and making predictions — tuneTrain"><meta name="description" content="Automatic function for tuning and training data, it returns a list containing a model objects, data frame and plot."><meta property="og:description" content="Automatic function for tuning and training data, it returns a list containing a model objects, data frame and plot."></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">icardaFIGSr</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.0.2</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/CropData.html">CropData</a></li>
    <li><a class="dropdown-item" href="../articles/ML_Workflows.html">ML_Workflows</a></li>
    <li><a class="dropdown-item" href="../articles/Sites_climate.html">Sites_climate</a></li>
  </ul></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Splitting the Data, Tuning and Training the models, and making predictions</h1>

      <div class="d-none name"><code>tuneTrain.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Automatic function for tuning and training data, it returns a list containing a model objects, data frame and plot.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">tuneTrain</span><span class="op">(</span></span>
<span>  <span class="va">data</span>,</span>
<span>  <span class="va">y</span>,</span>
<span>  p <span class="op">=</span> <span class="fl">0.7</span>,</span>
<span>  method <span class="op">=</span> <span class="st">"knn"</span>,</span>
<span>  imbalanceMethod <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  imbalanceThreshold <span class="op">=</span> <span class="fl">0.2</span>,</span>
<span>  parallelComputing <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  control <span class="op">=</span> <span class="st">"repeatedcv"</span>,</span>
<span>  Length <span class="op">=</span> <span class="fl">10</span>,</span>
<span>  number <span class="op">=</span> <span class="fl">10</span>,</span>
<span>  repeats <span class="op">=</span> <span class="fl">10</span>,</span>
<span>  process <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"center"</span>, <span class="st">"scale"</span><span class="op">)</span>,</span>
<span>  summary <span class="op">=</span> <span class="va">multiClassSummary</span>,</span>
<span>  classProbs <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  <span class="va">...</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-data">data<a class="anchor" aria-label="anchor" href="#arg-data"></a></dt>
<dd><p>object of class "data.frame" with target variable and predictor variables.</p></dd>


<dt id="arg-y">y<a class="anchor" aria-label="anchor" href="#arg-y"></a></dt>
<dd><p>character. Target variable.</p></dd>


<dt id="arg-p">p<a class="anchor" aria-label="anchor" href="#arg-p"></a></dt>
<dd><p>numeric. Proportion of data to be used for training. Default: 0.7</p></dd>


<dt id="arg-method">method<a class="anchor" aria-label="anchor" href="#arg-method"></a></dt>
<dd><p>character. Type of model to use for classification or regression.</p></dd>


<dt id="arg-imbalancemethod">imbalanceMethod<a class="anchor" aria-label="anchor" href="#arg-imbalancemethod"></a></dt>
<dd><p>Method for handling imbalanced data ("up", "down"). Default: NULL.</p></dd>


<dt id="arg-imbalancethreshold">imbalanceThreshold<a class="anchor" aria-label="anchor" href="#arg-imbalancethreshold"></a></dt>
<dd><p>Threshold to determine if data is imbalanced (numeric between 0 and 0.4). Default: 0.2.</p></dd>


<dt id="arg-parallelcomputing">parallelComputing<a class="anchor" aria-label="anchor" href="#arg-parallelcomputing"></a></dt>
<dd><p>logical. indicates whether to also use the parallel processing. Default: False</p></dd>


<dt id="arg-control">control<a class="anchor" aria-label="anchor" href="#arg-control"></a></dt>
<dd><p>character. Resampling method to use. Choices include: "boot", "boot632", "optimism_boot", "boot_all", "cv", "repeatedcv", "LOOCV", "LGOCV", "none", "oob", timeslice, "adaptive_cv", "adaptive_boot", or "adaptive_LGOCV". Default: "repeatedcv". See <code><a href="https://rdrr.io/pkg/caret/man/train.html" class="external-link">train</a></code> for specific details on the resampling methods.</p></dd>


<dt id="arg-length">Length<a class="anchor" aria-label="anchor" href="#arg-length"></a></dt>
<dd><p>integer. Number of values to output for each tuning parameter. If <code>search = "random"</code> is passed to <code><a href="https://rdrr.io/pkg/caret/man/trainControl.html" class="external-link">trainControl</a></code> through <code>...</code>, this becomes the maximum number of tuning parameter combinations that are generated by the random search. Default: 10.</p></dd>


<dt id="arg-number">number<a class="anchor" aria-label="anchor" href="#arg-number"></a></dt>
<dd><p>integer. Number of cross-validation folds or number of resampling iterations. Default: 10.</p></dd>


<dt id="arg-repeats">repeats<a class="anchor" aria-label="anchor" href="#arg-repeats"></a></dt>
<dd><p>integer. Number of folds for repeated k-fold cross-validation if "repeatedcv" is chosen as the resampling method in <code>control</code>. Default: 10.</p></dd>


<dt id="arg-process">process<a class="anchor" aria-label="anchor" href="#arg-process"></a></dt>
<dd><p>character. Defines the pre-processing transformation of predictor variables to be done. Options are: "BoxCox", "YeoJohnson", "expoTrans", "center", "scale", "range", "knnImpute", "bagImpute", "medianImpute", "pca", "ica", or "spatialSign". See <code><a href="https://rdrr.io/pkg/caret/man/preProcess.html" class="external-link">preProcess</a></code> for specific details on each pre-processing transformation. Default: c('center', 'scale').</p></dd>


<dt id="arg-summary">summary<a class="anchor" aria-label="anchor" href="#arg-summary"></a></dt>
<dd><p>expression. Computes performance metrics across resamples. For numeric <code>y</code>, the mean squared error and R-squared are calculated. For factor <code>y</code>, the overall accuracy and Kappa are calculated. See <code><a href="https://rdrr.io/pkg/caret/man/trainControl.html" class="external-link">trainControl</a></code> and <code><a href="https://rdrr.io/pkg/caret/man/postResample.html" class="external-link">defaultSummary</a></code> for details on specification and summary options. Default: multiClassSummary.</p></dd>


<dt id="arg-classprobs">classProbs<a class="anchor" aria-label="anchor" href="#arg-classprobs"></a></dt>
<dd><p>a logical (default : TRUE assuming classification task). It should be set to FALSE for regression tasks in conjunction with <code>summary</code> argument set to "defaultSummary". See examples for more details.</p></dd>


<dt id="arg--">...<a class="anchor" aria-label="anchor" href="#arg--"></a></dt>
<dd><p>additional arguments to be passed to <code>createDataPartition</code>, <code>trainControl</code> and <code>train</code> functions in the package <code>caret</code>.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>A list object with results from tuning and training the model selected in <code>method</code>, together with predictions and class probabilities. The training and test data sets obtained from splitting the data are also returned in addition to model quality metrics and preformance plots.</p>
<p>If <code>y</code> is factor, class probabilities are calculated for each class. If <code>y</code> is numeric, predicted values are calculated.</p>
<p>A ROC curve is created if <code>y</code> is factor. Otherwise, a plot of residuals versus predicted values is created if <code>y</code> is numeric.</p>
<p><code>tuneTrain</code> relies on packages <code>caret</code>, <code>ggplot2</code> and <code>pROC</code> to perform the modelling and plotting.</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>Types of classification and regression models available for use with <code>tuneTrain</code> can be found using <code>names(getModelInfo())</code>. The results given depend on the type of model used.</p>
<p>In addition to Model object, Model quality, Tuning and training datasets,For classification models, class probabilities and ROC curve are given in the results. For regression models, Variable importance, predictions and residuals versus predicted plot are given. <code>y</code> should be converted to either factor if performing classification or numeric if performing regression before specifying it in <code>tuneTrain</code>.</p>
<p>Imbalance handling methods "up" and "down" use ,respectively, upsample() and downsample() from caret subsampling methods.</p>
    </div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p><code><a href="https://rdrr.io/pkg/caret/man/createDataPartition.html" class="external-link">createDataPartition</a></code>,
<code><a href="https://rdrr.io/pkg/caret/man/trainControl.html" class="external-link">trainControl</a></code>,
<code><a href="https://rdrr.io/pkg/caret/man/train.html" class="external-link">train</a></code>,
<code><a href="https://rdrr.io/pkg/caret/man/predict.train.html" class="external-link">predict.train</a></code>,
<code><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></code>,
<code><a href="https://rdrr.io/pkg/pROC/man/auc.html" class="external-link">auc</a></code>,
<code><a href="https://rdrr.io/pkg/pROC/man/roc.html" class="external-link">roc</a></code>,
<code><a href="https://rdrr.io/pkg/pROC/man/ggroc.html" class="external-link">ggroc</a></code>,</p></div>
    </div>
    <div class="section level2">
    <h2 id="author">Author<a class="anchor" aria-label="anchor" href="#author"></a></h2>
    <p>Zakaria Kehel, Bancy Ngatia, Khadija Aziz, Chafik Analy</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span> <span class="co"># \dontrun{</span></span></span>
<span class="r-in"><span><span class="co"># Reading local test datasets</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="va">DurumWheatDHEWC</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="va">BarleyRNOWC</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="va">septoriaDurumWC</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## Binary classification of ST_S with balanced data</span></span></span>
<span class="r-in"><span><span class="va">tree.ST_S</span> <span class="op">&lt;-</span> <span class="fu">tuneTrain</span><span class="op">(</span>data <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/as.data.frame.html" class="external-link">as.data.frame</a></span><span class="op">(</span><span class="va">septoriaDurumWC</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                     y <span class="op">=</span>  <span class="st">'ST_S'</span>,</span></span>
<span class="r-in"><span>                     method <span class="op">=</span> <span class="st">'treebag'</span>,</span></span>
<span class="r-in"><span>                     summary <span class="op">=</span> <span class="va">multiClassSummary</span>,</span></span>
<span class="r-in"><span>                     repeats <span class="op">=</span> <span class="fl">3</span>,</span></span>
<span class="r-in"><span>                     classProbs <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## Binary classification of RNO with imbalanced data</span></span></span>
<span class="r-in"><span><span class="va">knn.RNO</span> <span class="op">&lt;-</span> <span class="fu">tuneTrain</span><span class="op">(</span>data <span class="op">=</span> <span class="va">BarleyRNOWC</span>,</span></span>
<span class="r-in"><span>                     y <span class="op">=</span>  <span class="st">'RNO'</span>,</span></span>
<span class="r-in"><span>                     method <span class="op">=</span> <span class="st">'knn'</span>,</span></span>
<span class="r-in"><span>                     summary <span class="op">=</span> <span class="va">multiClassSummary</span>,</span></span>
<span class="r-in"><span>                     imbalanceMethod <span class="op">=</span><span class="st">"up"</span>,</span></span>
<span class="r-in"><span>                     imbalanceThreshold <span class="op">=</span> <span class="fl">0.2</span>,</span></span>
<span class="r-in"><span>                     process <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"scale"</span>,<span class="st">"center"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                     classProbs <span class="op">=</span> <span class="cn">TRUE</span>,</span></span>
<span class="r-in"><span>                     repeats <span class="op">=</span> <span class="fl">3</span><span class="op">)</span></span></span>
<span class="r-in"><span>                      </span></span>
<span class="r-in"><span><span class="co">## Regression of DHE</span></span></span>
<span class="r-in"><span><span class="va">svm.DHE</span> <span class="op">&lt;-</span> <span class="fu">tuneTrain</span><span class="op">(</span>data <span class="op">=</span> <span class="va">DurumWheatDHEWC</span>,</span></span>
<span class="r-in"><span>                     y <span class="op">=</span>  <span class="st">'DHE'</span>,</span></span>
<span class="r-in"><span>                     method <span class="op">=</span> <span class="st">'svmLinear2'</span>,</span></span>
<span class="r-in"><span>                     summary <span class="op">=</span> <span class="va">defaultSummary</span>,</span></span>
<span class="r-in"><span>                     classProbs <span class="op">=</span> <span class="cn">FALSE</span>,</span></span>
<span class="r-in"><span>                     repeats <span class="op">=</span> <span class="fl">3</span><span class="op">)</span></span></span>
<span class="r-in"><span> <span class="op">}</span> <span class="co"># }</span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Khadija Aziz, Zakaria Kehel, Bancy Ngatia, Khadija Aouzal, Chafik Analy.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer></div>





  </body></html>

