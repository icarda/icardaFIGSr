---
title: "Extracting Sites Climate Data"
author: "Chafik Analy, Khadija Aouzal, Zakaria Kehel"
date: "`r Sys.Date()`"
output: 
  rmarkdown::html_vignette:
    self_contained: true
vignette: >
  %\VignetteIndexEntry{Sites_climate}
  %\VignetteEngine{knitr::rmarkdown}
  %\VignetteEncoding{UTF-8}
description: >
---

```{r, include = FALSE}
knitr::opts_chunk$set(
  fig.height = 6, fig.width = 7,
  collapse = TRUE,
  comment = "#>"
)
```

## getDaily()

`getDaily()` retrieves daily climate Data from ICARDA Genebank database given a vector of `site_codes` and a vector of `climate variables` among possible choices. This example demonstrates how to use the function to retrieve average daily temperature (tavg) for a subset of sites.

```r
library(icardaFIGSr)
# Extract daily data for durum wheat
durum <- getAccessions(crop = 'Durum wheat', coor = TRUE)
daily <- getDaily(sites = levels(as.factor(durum$SiteCode)), 
                    var = c('tavg', 'prec', 'rh'), cv = TRUE)
```

## extractWcdata()

`extractWCdata()` extracts monthly historical climate data from WorldClim v2.1 for the specified climate variable(s) and sites. 

```r
library(icardaFIGSr)

# Get barley accessions
barley_accs <- getAccessions(crop = "Barley", coor = TRUE)

barley_accs_bio <- extractWCdata(barley_accs, long = 'Longitude', lat = 'Latitude', 
                                  var = 'bio', res = 2.5)
```